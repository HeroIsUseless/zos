     1                                  org 0x7c00  ; 程序的内存装载地址
     2 00000000 EB4D                    jmp entry
     3                                  ; 标准FAT12格式软盘专用的代码
     4 00000002 4D794F535F49504C        db		"MyOS_IPL"		; 启动扇区名称（8字节）
     5 0000000A 0002                    dw		512				; 每个扇区（sector）大小（必须512字节）
     6 0000000C 01                      db		1				; 簇（cluster）大小（必须为1个扇区）
     7 0000000D 0100                    dw		1				; FAT起始位置（一般为第一个扇区）
     8 0000000F 02                      db		2				; FAT个数（必须为2）
     9 00000010 E000                    dw		224				; 根目录大小（一般为224项）
    10 00000012 400B                    dw		2880			; 该磁盘大小（必须为2880扇区1440*1024/512）
    11 00000014 F0                      db		0xf0			; 磁盘类型（必须为0xf0）
    12 00000015 0900                    dw		9				; FAT的长度（必须是9扇区）
    13 00000017 1200                    dw		18				; 一个磁道（track）有几个扇区（必须为18）
    14 00000019 0200                    dw		2				; 磁头数（必须是2）
    15 0000001B 00000000                dd		0				; 不使用分区，必须是0
    16 0000001F 400B0000                dd		2880			; 重写一次磁盘大小
    17 00000023 000029                  db		0,0,0x29		; 意义不明（固定）
    18 00000026 FFFFFFFF                dd		0xffffffff		; （可能是）卷标号码
    19 0000002A 4D794F535F6469736B-     db		"MyOS_disk  "	; 磁盘的名称（必须为11字节，不足填空格）
    19 00000033 2020               
    20 00000035 4641543132202020        db		"FAT12   "		; 磁盘格式名称（必须是8字节，不足填空格）
    21 0000003D 00<rep 12h>             times	18 db 0			; 先空出18字节
    22                                  ;  加载磁盘内容到内存
    23                                  entry:
    24 0000004F B400                        mov ah, 0x00
    25 00000051 CD13                        int 0x13       ; 重置驱动器
    26 00000053 B8007E                      mov ax, 0x7e00
    27 00000056 8ED0                        mov ss, ax     ; 堆栈地址为0x7e00
    28 00000058 BC0000                      mov sp, 0      ; 堆栈指针
    29 0000005B B80080                      mov ax, 0x8000 
    30 0000005E 8EC0                        mov es, ax     ; 内存基址
    31 00000060 BB0000                      mov bx, 0      ; 内存偏移量始终为0
    32 00000063 B500                        mov ch, 0      ; 柱面0
    33 00000065 B600                        mov dh, 0      ; 磁头0
    34 00000067 B101                        mov cl, 1      ; 扇区0
    35 00000069 B200                        mov dl, 0      ; A驱动器
    36 0000006B B402                        mov ah, 0x02   ; 读入磁盘功能号
    37 0000006D B001                        mov al, 1      ; 一个扇区
    38 0000006F CD13                        int 0x13
    39 00000071 EB28                        jmp showError
    40                                   
    41                                  readloop:  
    42 00000073 CD13                        int 0x13     ; 读入
    43 00000075 8CC7                        mov di, es
    44 00000077 81C70002                    add di, 0x200
    45 0000007B 8EC7                        mov es, di   ; 把内存地址后移512
    46 0000007D 80C101                      add cl, 1    ; cl的加1
    47 00000080 80F912                      cmp cl, 18   ; 读完18个扇区
    48 00000083 72EE                        jb readloop
    49 00000085 B100                        mov cl, 0
    50 00000087 80C501                      add ch, 1
    51 0000008A 80FD50                      cmp ch, 80  ; 读完80个柱面
    52 0000008D 72E4                        jb readloop 
    53 0000008F B500                        mov ch, 0
    54 00000091 80C601                      add dh, 1
    55 00000094 80FE02                      cmp dh, 2
    56 00000097 72DA                        jb readloop ; 两个正反面
    57                                  
    58 00000099 EB00                        jmp showError
    59                                      ;jmp 0x8200 ; 跳转到系统执行
    60                                   
    61                                  showError:
    62 0000009B BE[B300]                    mov si, msg
    63                                      putloop:
    64 0000009E 8A04                            mov al, [si] ; 把si中的内容放到al中
    65 000000A0 83C601                          add si, 1
    66 000000A3 3C00                            cmp al, 0
    67 000000A5 7409                            je halt
    68 000000A7 B40E                            mov ah, 0x0e
    69 000000A9 BB0F00                          mov bx, 15
    70 000000AC CD10                            int 0x10
    71 000000AE EBEE                        jmp putloop
    72                                   
    73                                  halt:
    74 000000B0 F4                          hlt 
    75 000000B1 EBFD                        jmp halt
    76                                   
    77                                  ; 信息显示部分
    78                                  msg:
    79 000000B3 0A0A                    db		0x0a, 0x0a		; 换行两次
    80 000000B5 6C6F6164206572726F-     db		"load error"
    80 000000BE 72                 
    81 000000BF 0A                      db		0x0a			; 换行
    82 000000C0 00                      db		0
    83                                   
    84 000000C1 00<rep 13Dh>            times    510-($-$$) db 0 
    85 000001FE 55AA                    db		0x55, 0xaa
