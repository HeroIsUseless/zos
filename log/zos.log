     1                                  [bits 32]
     2                                  ORG 0x280000
     3 00000000 EB18                    jmp main
     4                                  
     5                                  ; 读写内存
     6                                  ; kernel.z\setMem.1byte(val:dword, addr:dword)
     7                                  kernel_z_setMem_1byte:
     8 00000002 5D                        pop ebp
     9 00000003 5B                        pop ebx
    10 00000004 58                        pop eax
    11 00000005 55                        push ebp
    12 00000006 8803                      mov [ebx], al
    13 00000008 C3                      ret
    14                                  
    15                                  ; kernel.z\setMem.2byte(val:dword, addr:dword)
    16                                  kernel_z_setMem_2byte:
    17 00000009 5D                        pop ebp
    18 0000000A 5B                        pop ebx
    19 0000000B 58                        pop eax
    20 0000000C 55                        push ebp
    21 0000000D 668903                    mov [ebx], ax
    22 00000010 C3                      ret
    23                                  
    24                                  ; kernel.z\setMem.4byte(val:dword, addr:dword)
    25                                  kernel_z_setMem_4byte:
    26 00000011 5D                        pop ebp
    27 00000012 5B                        pop ebx
    28 00000013 58                        pop eax
    29 00000014 55                        push ebp
    30 00000015 8903                      mov [ebx], eax
    31 00000017 C3                      ret
    32                                  
    33                                  ; kernel.z\halt()
    34                                  kernel_z_halt:
    35 00000018 F4                        hlt
    36 00000019 C3                      ret
    37                                  
    38                                  main:
    39 0000001A E80C000000                call main_z_run_once
    40                                    .loop:
    41 0000001F E895000000                  call main_z_run_loop
    42 00000024 EBF9                      jmp .loop
    43                                  
    44 00000026 E98C000000              jmp main_z_run_once$next
    45                                  main_z_run_once:
    46 0000002B 5D                      pop ebp
    47 0000002C 55                      push ebp
    48 0000002D B840010000              mov eax, 320
    49 00000032 50                      push eax
    50 00000033 EB04                    jmp main_z_run_once_screenWidth$next
    51 00000035 00000000                main_z_run_once_screenWidth: dd 0
    52                                  main_z_run_once_screenWidth$next:
    53 00000039 58                      pop eax
    54 0000003A A3[35000000]            mov [main_z_run_once_screenWidth], eax
    55 0000003F B8C8000000              mov eax, 200
    56 00000044 50                      push eax
    57 00000045 EB04                    jmp main_z_run_once_screenHeight$next
    58 00000047 00000000                main_z_run_once_screenHeight: dd 0
    59                                  main_z_run_once_screenHeight$next:
    60 0000004B 58                      pop eax
    61 0000004C A3[47000000]            mov [main_z_run_once_screenHeight], eax
    62 00000051 B800000A00              mov eax, 0x000a0000
    63 00000056 50                      push eax
    64 00000057 EB04                    jmp main_z_run_once_addrVram$next
    65 00000059 00000000                main_z_run_once_addrVram: dd 0
    66                                  main_z_run_once_addrVram$next:
    67 0000005D 58                      pop eax
    68 0000005E A3[59000000]            mov [main_z_run_once_addrVram], eax
    69 00000063 B800E02400              mov eax, 0x0024e000
    70 00000068 50                      push eax
    71 00000069 EB04                    jmp main_z_run_once_addrPM$next
    72 0000006B 00000000                main_z_run_once_addrPM: dd 0
    73                                  main_z_run_once_addrPM$next:
    74 0000006F 58                      pop eax
    75 00000070 A3[6B000000]            mov [main_z_run_once_addrPM], eax
    76 00000075 B800E02600              mov eax, 0x0026e000
    77 0000007A 50                      push eax
    78 0000007B EB04                    jmp main_z_run_once_addrPDT$next
    79 0000007D 00000000                main_z_run_once_addrPDT: dd 0
    80                                  main_z_run_once_addrPDT$next:
    81 00000081 58                      pop eax
    82 00000082 A3[7D000000]            mov [main_z_run_once_addrPDT], eax
    83 00000087 B800F82600              mov eax, 0x0026f800
    84 0000008C 50                      push eax
    85 0000008D EB04                    jmp main_z_run_once_addrIDT$next
    86 0000008F 00000000                main_z_run_once_addrIDT: dd 0
    87                                  main_z_run_once_addrIDT$next:
    88 00000093 58                      pop eax
    89 00000094 A3[8F000000]            mov [main_z_run_once_addrIDT], eax
    90 00000099 B800002700              mov eax, 0x00270000
    91 0000009E 50                      push eax
    92 0000009F EB04                    jmp main_z_run_once_addrGDT$next
    93 000000A1 00000000                main_z_run_once_addrGDT: dd 0
    94                                  main_z_run_once_addrGDT$next:
    95 000000A5 58                      pop eax
    96 000000A6 A3[A1000000]            mov [main_z_run_once_addrGDT], eax
    97 000000AB A1[59000000]            mov eax, [main_z_run_once_addrVram]
    98 000000B0 50                      push eax
    99 000000B1 E819010000              call test_z_draw
   100 000000B6 C3                      ret
   101                                  main_z_run_once$next:
   102 000000B7 EB08                    jmp main_z_run_loop$next
   103                                  main_z_run_loop:
   104 000000B9 5D                      pop ebp
   105 000000BA 55                      push ebp
   106 000000BB E858FFFFFF              call kernel_z_halt
   107 000000C0 C3                      ret
   108                                  main_z_run_loop$next:
   109 000000C1 EB2C                    jmp memory_z_set_1byte$next
   110                                  memory_z_set_1byte:
   111 000000C3 EB04                    jmp memory_z_set_1byte_val$next
   112 000000C5 00000000                memory_z_set_1byte_val: dd 0
   113                                  memory_z_set_1byte_val$next:
   114 000000C9 EB04                    jmp memory_z_set_1byte_addr$next
   115 000000CB 00000000                memory_z_set_1byte_addr: dd 0
   116                                  memory_z_set_1byte_addr$next:
   117 000000CF 5D                      pop ebp
   118 000000D0 58                      pop eax
   119 000000D1 A3[CB000000]            mov [memory_z_set_1byte_addr], eax
   120 000000D6 58                      pop eax
   121 000000D7 A3[C5000000]            mov [memory_z_set_1byte_val], eax
   122 000000DC 55                      push ebp
   123 000000DD A1[C5000000]            mov eax, [memory_z_set_1byte_val]
   124 000000E2 50                      push eax
   125 000000E3 A1[CB000000]            mov eax, [memory_z_set_1byte_addr]
   126 000000E8 50                      push eax
   127 000000E9 E814FFFFFF              call kernel_z_setMem_1byte
   128 000000EE C3                      ret
   129                                  memory_z_set_1byte$next:
   130 000000EF EB2C                    jmp memory_z_set_2byte$next
   131                                  memory_z_set_2byte:
   132 000000F1 EB04                    jmp memory_z_set_2byte_val$next
   133 000000F3 00000000                memory_z_set_2byte_val: dd 0
   134                                  memory_z_set_2byte_val$next:
   135 000000F7 EB04                    jmp memory_z_set_2byte_addr$next
   136 000000F9 00000000                memory_z_set_2byte_addr: dd 0
   137                                  memory_z_set_2byte_addr$next:
   138 000000FD 5D                      pop ebp
   139 000000FE 58                      pop eax
   140 000000FF A3[F9000000]            mov [memory_z_set_2byte_addr], eax
   141 00000104 58                      pop eax
   142 00000105 A3[F3000000]            mov [memory_z_set_2byte_val], eax
   143 0000010A 55                      push ebp
   144 0000010B A1[F3000000]            mov eax, [memory_z_set_2byte_val]
   145 00000110 50                      push eax
   146 00000111 A1[F9000000]            mov eax, [memory_z_set_2byte_addr]
   147 00000116 50                      push eax
   148 00000117 E8EDFEFFFF              call kernel_z_setMem_2byte
   149 0000011C C3                      ret
   150                                  memory_z_set_2byte$next:
   151 0000011D EB2C                    jmp memory_z_set_4byte$next
   152                                  memory_z_set_4byte:
   153 0000011F EB04                    jmp memory_z_set_4byte_val$next
   154 00000121 00000000                memory_z_set_4byte_val: dd 0
   155                                  memory_z_set_4byte_val$next:
   156 00000125 EB04                    jmp memory_z_set_4byte_addr$next
   157 00000127 00000000                memory_z_set_4byte_addr: dd 0
   158                                  memory_z_set_4byte_addr$next:
   159 0000012B 5D                      pop ebp
   160 0000012C 58                      pop eax
   161 0000012D A3[27010000]            mov [memory_z_set_4byte_addr], eax
   162 00000132 58                      pop eax
   163 00000133 A3[21010000]            mov [memory_z_set_4byte_val], eax
   164 00000138 55                      push ebp
   165 00000139 A1[21010000]            mov eax, [memory_z_set_4byte_val]
   166 0000013E 50                      push eax
   167 0000013F A1[27010000]            mov eax, [memory_z_set_4byte_addr]
   168 00000144 50                      push eax
   169 00000145 E8C7FEFFFF              call kernel_z_setMem_4byte
   170 0000014A C3                      ret
   171                                  memory_z_set_4byte$next:
   172 0000014B EB7D                    jmp draw_z_pixel$next
   173                                  draw_z_pixel:
   174 0000014D EB04                    jmp draw_z_pixel_x$next
   175 0000014F 00000000                draw_z_pixel_x: dd 0
   176                                  draw_z_pixel_x$next:
   177 00000153 EB04                    jmp draw_z_pixel_y$next
   178 00000155 00000000                draw_z_pixel_y: dd 0
   179                                  draw_z_pixel_y$next:
   180 00000159 EB04                    jmp draw_z_pixel_color$next
   181 0000015B 00000000                draw_z_pixel_color: dd 0
   182                                  draw_z_pixel_color$next:
   183 0000015F EB04                    jmp draw_z_pixel_screenWidth$next
   184 00000161 00000000                draw_z_pixel_screenWidth: dd 0
   185                                  draw_z_pixel_screenWidth$next:
   186 00000165 EB04                    jmp draw_z_pixel_vramAddr$next
   187 00000167 00000000                draw_z_pixel_vramAddr: dd 0
   188                                  draw_z_pixel_vramAddr$next:
   189 0000016B 5D                      pop ebp
   190 0000016C 58                      pop eax
   191 0000016D A3[67010000]            mov [draw_z_pixel_vramAddr], eax
   192 00000172 58                      pop eax
   193 00000173 A3[61010000]            mov [draw_z_pixel_screenWidth], eax
   194 00000178 58                      pop eax
   195 00000179 A3[5B010000]            mov [draw_z_pixel_color], eax
   196 0000017E 58                      pop eax
   197 0000017F A3[55010000]            mov [draw_z_pixel_y], eax
   198 00000184 58                      pop eax
   199 00000185 A3[4F010000]            mov [draw_z_pixel_x], eax
   200 0000018A 55                      push ebp
   201 0000018B A1[4F010000]            mov eax, [draw_z_pixel_x]
   202 00000190 50                      push eax
   203 00000191 A1[55010000]            mov eax, [draw_z_pixel_y]
   204 00000196 50                      push eax
   205 00000197 A1[61010000]            mov eax, [draw_z_pixel_screenWidth]
   206 0000019C 5B                      pop ebx
   207 0000019D F7E3                    mul ebx
   208 0000019F 5B                      pop ebx
   209 000001A0 01D8                    add eax, ebx
   210 000001A2 50                      push eax
   211 000001A3 A1[67010000]            mov eax, [draw_z_pixel_vramAddr]
   212 000001A8 5B                      pop ebx
   213 000001A9 01D8                    add eax, ebx
   214 000001AB 50                      push eax
   215 000001AC EB04                    jmp draw_z_pixel_addr$next
   216 000001AE 00000000                draw_z_pixel_addr: dd 0
   217                                  draw_z_pixel_addr$next:
   218 000001B2 58                      pop eax
   219 000001B3 A3[AE010000]            mov [draw_z_pixel_addr], eax
   220 000001B8 A1[5B010000]            mov eax, [draw_z_pixel_color]
   221 000001BD 50                      push eax
   222 000001BE A1[AE010000]            mov eax, [draw_z_pixel_addr]
   223 000001C3 50                      push eax
   224 000001C4 E8FAFEFFFF              call memory_z_set_1byte
   225 000001C9 C3                      ret
   226                                  draw_z_pixel$next:
   227 000001CA E9AC020000              jmp test_z_draw$next
   228                                  test_z_draw:
   229 000001CF EB04                    jmp test_z_draw_addrVram$next
   230 000001D1 00000000                test_z_draw_addrVram: dd 0
   231                                  test_z_draw_addrVram$next:
   232 000001D5 5D                      pop ebp
   233 000001D6 58                      pop eax
   234 000001D7 A3[D1010000]            mov [test_z_draw_addrVram], eax
   235 000001DC 55                      push ebp
   236 000001DD B800000000              mov eax, 0
   237 000001E2 50                      push eax
   238 000001E3 B800000000              mov eax, 0
   239 000001E8 50                      push eax
   240 000001E9 B800000000              mov eax, 0
   241 000001EE 50                      push eax
   242 000001EF B840010000              mov eax, 320
   243 000001F4 50                      push eax
   244 000001F5 A1[D1010000]            mov eax, [test_z_draw_addrVram]
   245 000001FA 50                      push eax
   246 000001FB E84DFFFFFF              call draw_z_pixel
   247 00000200 B801000000              mov eax, 1
   248 00000205 50                      push eax
   249 00000206 B801000000              mov eax, 1
   250 0000020B 50                      push eax
   251 0000020C B801000000              mov eax, 1
   252 00000211 50                      push eax
   253 00000212 B840010000              mov eax, 320
   254 00000217 50                      push eax
   255 00000218 A1[D1010000]            mov eax, [test_z_draw_addrVram]
   256 0000021D 50                      push eax
   257 0000021E E82AFFFFFF              call draw_z_pixel
   258 00000223 B802000000              mov eax, 2
   259 00000228 50                      push eax
   260 00000229 B802000000              mov eax, 2
   261 0000022E 50                      push eax
   262 0000022F B802000000              mov eax, 2
   263 00000234 50                      push eax
   264 00000235 B840010000              mov eax, 320
   265 0000023A 50                      push eax
   266 0000023B A1[D1010000]            mov eax, [test_z_draw_addrVram]
   267 00000240 50                      push eax
   268 00000241 E807FFFFFF              call draw_z_pixel
   269 00000246 B803000000              mov eax, 3
   270 0000024B 50                      push eax
   271 0000024C B803000000              mov eax, 3
   272 00000251 50                      push eax
   273 00000252 B803000000              mov eax, 3
   274 00000257 50                      push eax
   275 00000258 B840010000              mov eax, 320
   276 0000025D 50                      push eax
   277 0000025E A1[D1010000]            mov eax, [test_z_draw_addrVram]
   278 00000263 50                      push eax
   279 00000264 E8E4FEFFFF              call draw_z_pixel
   280 00000269 B804000000              mov eax, 4
   281 0000026E 50                      push eax
   282 0000026F B804000000              mov eax, 4
   283 00000274 50                      push eax
   284 00000275 B804000000              mov eax, 4
   285 0000027A 50                      push eax
   286 0000027B B840010000              mov eax, 320
   287 00000280 50                      push eax
   288 00000281 A1[D1010000]            mov eax, [test_z_draw_addrVram]
   289 00000286 50                      push eax
   290 00000287 E8C1FEFFFF              call draw_z_pixel
   291 0000028C B805000000              mov eax, 5
   292 00000291 50                      push eax
   293 00000292 B805000000              mov eax, 5
   294 00000297 50                      push eax
   295 00000298 B805000000              mov eax, 5
   296 0000029D 50                      push eax
   297 0000029E B840010000              mov eax, 320
   298 000002A3 50                      push eax
   299 000002A4 A1[D1010000]            mov eax, [test_z_draw_addrVram]
   300 000002A9 50                      push eax
   301 000002AA E89EFEFFFF              call draw_z_pixel
   302 000002AF B806000000              mov eax, 6
   303 000002B4 50                      push eax
   304 000002B5 B806000000              mov eax, 6
   305 000002BA 50                      push eax
   306 000002BB B806000000              mov eax, 6
   307 000002C0 50                      push eax
   308 000002C1 B840010000              mov eax, 320
   309 000002C6 50                      push eax
   310 000002C7 A1[D1010000]            mov eax, [test_z_draw_addrVram]
   311 000002CC 50                      push eax
   312 000002CD E87BFEFFFF              call draw_z_pixel
   313 000002D2 B807000000              mov eax, 7
   314 000002D7 50                      push eax
   315 000002D8 B807000000              mov eax, 7
   316 000002DD 50                      push eax
   317 000002DE B807000000              mov eax, 7
   318 000002E3 50                      push eax
   319 000002E4 B840010000              mov eax, 320
   320 000002E9 50                      push eax
   321 000002EA A1[D1010000]            mov eax, [test_z_draw_addrVram]
   322 000002EF 50                      push eax
   323 000002F0 E858FEFFFF              call draw_z_pixel
   324 000002F5 B808000000              mov eax, 8
   325 000002FA 50                      push eax
   326 000002FB B808000000              mov eax, 8
   327 00000300 50                      push eax
   328 00000301 B808000000              mov eax, 8
   329 00000306 50                      push eax
   330 00000307 B840010000              mov eax, 320
   331 0000030C 50                      push eax
   332 0000030D A1[D1010000]            mov eax, [test_z_draw_addrVram]
   333 00000312 50                      push eax
   334 00000313 E835FEFFFF              call draw_z_pixel
   335 00000318 B809000000              mov eax, 9
   336 0000031D 50                      push eax
   337 0000031E B809000000              mov eax, 9
   338 00000323 50                      push eax
   339 00000324 B809000000              mov eax, 9
   340 00000329 50                      push eax
   341 0000032A B840010000              mov eax, 320
   342 0000032F 50                      push eax
   343 00000330 A1[D1010000]            mov eax, [test_z_draw_addrVram]
   344 00000335 50                      push eax
   345 00000336 E812FEFFFF              call draw_z_pixel
   346 0000033B B80A000000              mov eax, 10
   347 00000340 50                      push eax
   348 00000341 B80A000000              mov eax, 10
   349 00000346 50                      push eax
   350 00000347 B80A000000              mov eax, 10
   351 0000034C 50                      push eax
   352 0000034D B840010000              mov eax, 320
   353 00000352 50                      push eax
   354 00000353 A1[D1010000]            mov eax, [test_z_draw_addrVram]
   355 00000358 50                      push eax
   356 00000359 E8EFFDFFFF              call draw_z_pixel
   357 0000035E B80B000000              mov eax, 11
   358 00000363 50                      push eax
   359 00000364 B80B000000              mov eax, 11
   360 00000369 50                      push eax
   361 0000036A B80B000000              mov eax, 11
   362 0000036F 50                      push eax
   363 00000370 B840010000              mov eax, 320
   364 00000375 50                      push eax
   365 00000376 A1[D1010000]            mov eax, [test_z_draw_addrVram]
   366 0000037B 50                      push eax
   367 0000037C E8CCFDFFFF              call draw_z_pixel
   368 00000381 B80C000000              mov eax, 12
   369 00000386 50                      push eax
   370 00000387 B80C000000              mov eax, 12
   371 0000038C 50                      push eax
   372 0000038D B80C000000              mov eax, 12
   373 00000392 50                      push eax
   374 00000393 B840010000              mov eax, 320
   375 00000398 50                      push eax
   376 00000399 A1[D1010000]            mov eax, [test_z_draw_addrVram]
   377 0000039E 50                      push eax
   378 0000039F E8A9FDFFFF              call draw_z_pixel
   379 000003A4 B80D000000              mov eax, 13
   380 000003A9 50                      push eax
   381 000003AA B80D000000              mov eax, 13
   382 000003AF 50                      push eax
   383 000003B0 B80D000000              mov eax, 13
   384 000003B5 50                      push eax
   385 000003B6 B840010000              mov eax, 320
   386 000003BB 50                      push eax
   387 000003BC A1[D1010000]            mov eax, [test_z_draw_addrVram]
   388 000003C1 50                      push eax
   389 000003C2 E886FDFFFF              call draw_z_pixel
   390 000003C7 B80E000000              mov eax, 14
   391 000003CC 50                      push eax
   392 000003CD B80E000000              mov eax, 14
   393 000003D2 50                      push eax
   394 000003D3 B80E000000              mov eax, 14
   395 000003D8 50                      push eax
   396 000003D9 B840010000              mov eax, 320
   397 000003DE 50                      push eax
   398 000003DF A1[D1010000]            mov eax, [test_z_draw_addrVram]
   399 000003E4 50                      push eax
   400 000003E5 E863FDFFFF              call draw_z_pixel
   401 000003EA B80F000000              mov eax, 15
   402 000003EF 50                      push eax
   403 000003F0 B80F000000              mov eax, 15
   404 000003F5 50                      push eax
   405 000003F6 B80F000000              mov eax, 15
   406 000003FB 50                      push eax
   407 000003FC B840010000              mov eax, 320
   408 00000401 50                      push eax
   409 00000402 A1[D1010000]            mov eax, [test_z_draw_addrVram]
   410 00000407 50                      push eax
   411 00000408 E840FDFFFF              call draw_z_pixel
   412 0000040D B800000000              mov eax, 0
   413 00000412 50                      push eax
   414 00000413 EB04                    jmp test_z_draw_i$next
   415 00000415 00000000                test_z_draw_i: dd 0
   416                                  test_z_draw_i$next:
   417 00000419 58                      pop eax
   418 0000041A A3[15040000]            mov [test_z_draw_i], eax
   419                                  test_z_draw_while$1:
   420 0000041F A1[15040000]            mov eax, [test_z_draw_i]
   421 00000424 50                      push eax
   422 00000425 B810000000              mov eax, 16
   423 0000042A 50                      push eax
   424 0000042B 5B                      pop ebx
   425 0000042C 58                      pop eax
   426 0000042D 39D8                    cmp eax, ebx
   427 0000042F 7207                    jb test_z_draw_less@true$1
   428 00000431 B800000000              mov eax, 0
   429 00000436 EB05                    jmp test_z_draw_less@false$1
   430                                  test_z_draw_less@true$1:
   431 00000438 B801000000              mov eax, 1
   432                                  test_z_draw_less@false$1:
   433 0000043D 83F800                  cmp eax, 0
   434 00000440 7438                    je test_z_draw_while@end$1
   435 00000442 A1[15040000]            mov eax, [test_z_draw_i]
   436 00000447 50                      push eax
   437 00000448 B800000000              mov eax, 0
   438 0000044D 50                      push eax
   439 0000044E A1[15040000]            mov eax, [test_z_draw_i]
   440 00000453 50                      push eax
   441 00000454 B840010000              mov eax, 320
   442 00000459 50                      push eax
   443 0000045A A1[D1010000]            mov eax, [test_z_draw_addrVram]
   444 0000045F 50                      push eax
   445 00000460 E8E8FCFFFF              call draw_z_pixel
   446 00000465 A1[15040000]            mov eax, [test_z_draw_i]
   447 0000046A 50                      push eax
   448 0000046B B801000000              mov eax, 1
   449 00000470 5B                      pop ebx
   450 00000471 01D8                    add eax, ebx
   451 00000473 A3[15040000]            mov [test_z_draw_i], eax
   452 00000478 EBA5                    jmp test_z_draw_while$1
   453                                  test_z_draw_while@end$1:
   454 0000047A C3                      ret
   455                                  test_z_draw$next:
