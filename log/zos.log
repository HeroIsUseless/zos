     1                                  [bits 32]
     2                                  ORG 0x280000
     3 00000000 EB18                    jmp main
     4                                  
     5                                  ; 读写内存
     6                                  ; kernel.z\setMem.1byte(val:dword, addr:dword)
     7                                  kernel_z_setMem_1byte:
     8 00000002 5D                        pop ebp
     9 00000003 5B                        pop ebx
    10 00000004 58                        pop eax
    11 00000005 55                        push ebp
    12 00000006 8803                      mov [ebx], al
    13 00000008 C3                      ret
    14                                  
    15                                  ; kernel.z\setMem.2byte(val:dword, addr:dword)
    16                                  kernel_z_setMem_2byte:
    17 00000009 5D                        pop ebp
    18 0000000A 5B                        pop ebx
    19 0000000B 58                        pop eax
    20 0000000C 55                        push ebp
    21 0000000D 668903                    mov [ebx], ax
    22 00000010 C3                      ret
    23                                  
    24                                  ; kernel.z\setMem.4byte(val:dword, addr:dword)
    25                                  kernel_z_setMem_4byte:
    26 00000011 5D                        pop ebp
    27 00000012 5B                        pop ebx
    28 00000013 58                        pop eax
    29 00000014 55                        push ebp
    30 00000015 8903                      mov [ebx], eax
    31 00000017 C3                      ret
    32                                  
    33                                  ; kernel.z\halt()
    34                                  kernel_z_halt:
    35 00000018 F4                        hlt
    36 00000019 C3                      ret
    37                                  
    38                                  main:
    39 0000001A E809000000                call main_z_run_once
    40                                    .loop:
    41 0000001F E87D000000                  call main_z_run_loop
    42 00000024 EBF9                      jmp .loop
    43                                  
    44 00000026 EB77                    jmp main_z_run_once$next
    45                                  main_z_run_once:
    46 00000028 5D                      pop ebp
    47 00000029 55                      push ebp
    48 0000002A B840010000              mov eax, 320
    49 0000002F 50                      push eax
    50 00000030 EB01                    jmp main_z_run_once_screenWidth$next
    51 00000032 00                      main_z_run_once_screenWidth: db 0
    52                                  main_z_run_once_screenWidth$next:
    53 00000033 58                      pop eax
    54 00000034 A3[32000000]            mov [main_z_run_once_screenWidth], eax
    55 00000039 B8C8000000              mov eax, 200
    56 0000003E 50                      push eax
    57 0000003F EB01                    jmp main_z_run_once_screenHeight$next
    58 00000041 00                      main_z_run_once_screenHeight: db 0
    59                                  main_z_run_once_screenHeight$next:
    60 00000042 58                      pop eax
    61 00000043 A3[41000000]            mov [main_z_run_once_screenHeight], eax
    62 00000048 B800000A00              mov eax, 0x000a0000
    63 0000004D 50                      push eax
    64 0000004E EB01                    jmp main_z_run_once_addrVram$next
    65 00000050 00                      main_z_run_once_addrVram: db 0
    66                                  main_z_run_once_addrVram$next:
    67 00000051 58                      pop eax
    68 00000052 A3[50000000]            mov [main_z_run_once_addrVram], eax
    69 00000057 B800E02400              mov eax, 0x0024e000
    70 0000005C 50                      push eax
    71 0000005D EB01                    jmp main_z_run_once_addrPM$next
    72 0000005F 00                      main_z_run_once_addrPM: db 0
    73                                  main_z_run_once_addrPM$next:
    74 00000060 58                      pop eax
    75 00000061 A3[5F000000]            mov [main_z_run_once_addrPM], eax
    76 00000066 B800E02600              mov eax, 0x0026e000
    77 0000006B 50                      push eax
    78 0000006C EB01                    jmp main_z_run_once_addrPDT$next
    79 0000006E 00                      main_z_run_once_addrPDT: db 0
    80                                  main_z_run_once_addrPDT$next:
    81 0000006F 58                      pop eax
    82 00000070 A3[6E000000]            mov [main_z_run_once_addrPDT], eax
    83 00000075 B800F82600              mov eax, 0x0026f800
    84 0000007A 50                      push eax
    85 0000007B EB01                    jmp main_z_run_once_addrIDT$next
    86 0000007D 00                      main_z_run_once_addrIDT: db 0
    87                                  main_z_run_once_addrIDT$next:
    88 0000007E 58                      pop eax
    89 0000007F A3[7D000000]            mov [main_z_run_once_addrIDT], eax
    90 00000084 B800002700              mov eax, 0x00270000
    91 00000089 50                      push eax
    92 0000008A EB01                    jmp main_z_run_once_addrGDT$next
    93 0000008C 00                      main_z_run_once_addrGDT: db 0
    94                                  main_z_run_once_addrGDT$next:
    95 0000008D 58                      pop eax
    96 0000008E A3[8C000000]            mov [main_z_run_once_addrGDT], eax
    97 00000093 A1[50000000]            mov eax, [main_z_run_once_addrVram]
    98 00000098 50                      push eax
    99 00000099 E8F8000000              call test_z_draw
   100 0000009E C3                      ret
   101                                  main_z_run_once$next:
   102 0000009F EB08                    jmp main_z_run_loop$next
   103                                  main_z_run_loop:
   104 000000A1 5D                      pop ebp
   105 000000A2 55                      push ebp
   106 000000A3 E870FFFFFF              call kernel_z_halt
   107 000000A8 C3                      ret
   108                                  main_z_run_loop$next:
   109 000000A9 EB26                    jmp memory_z_set_1byte$next
   110                                  memory_z_set_1byte:
   111 000000AB EB01                    jmp memory_z_set_1byte_addr$next
   112 000000AD 00                      memory_z_set_1byte_addr: db 0
   113                                  memory_z_set_1byte_addr$next:
   114 000000AE EB01                    jmp memory_z_set_1byte_val$next
   115 000000B0 00                      memory_z_set_1byte_val: db 0
   116                                  memory_z_set_1byte_val$next:
   117 000000B1 5D                      pop ebp
   118 000000B2 58                      pop eax
   119 000000B3 A3[B0000000]            mov [memory_z_set_1byte_val], eax
   120 000000B8 58                      pop eax
   121 000000B9 A3[AD000000]            mov [memory_z_set_1byte_addr], eax
   122 000000BE 55                      push ebp
   123 000000BF A1[B0000000]            mov eax, [memory_z_set_1byte_val]
   124 000000C4 50                      push eax
   125 000000C5 A1[AD000000]            mov eax, [memory_z_set_1byte_addr]
   126 000000CA 50                      push eax
   127 000000CB E832FFFFFF              call kernel_z_setMem_1byte
   128 000000D0 C3                      ret
   129                                  memory_z_set_1byte$next:
   130 000000D1 EB26                    jmp memory_z_set_2byte$next
   131                                  memory_z_set_2byte:
   132 000000D3 EB01                    jmp memory_z_set_2byte_addr$next
   133 000000D5 00                      memory_z_set_2byte_addr: db 0
   134                                  memory_z_set_2byte_addr$next:
   135 000000D6 EB01                    jmp memory_z_set_2byte_val$next
   136 000000D8 00                      memory_z_set_2byte_val: db 0
   137                                  memory_z_set_2byte_val$next:
   138 000000D9 5D                      pop ebp
   139 000000DA 58                      pop eax
   140 000000DB A3[D8000000]            mov [memory_z_set_2byte_val], eax
   141 000000E0 58                      pop eax
   142 000000E1 A3[D5000000]            mov [memory_z_set_2byte_addr], eax
   143 000000E6 55                      push ebp
   144 000000E7 A1[D8000000]            mov eax, [memory_z_set_2byte_val]
   145 000000EC 50                      push eax
   146 000000ED A1[D5000000]            mov eax, [memory_z_set_2byte_addr]
   147 000000F2 50                      push eax
   148 000000F3 E811FFFFFF              call kernel_z_setMem_2byte
   149 000000F8 C3                      ret
   150                                  memory_z_set_2byte$next:
   151 000000F9 EB26                    jmp memory_z_set_4byte$next
   152                                  memory_z_set_4byte:
   153 000000FB EB01                    jmp memory_z_set_4byte_addr$next
   154 000000FD 00                      memory_z_set_4byte_addr: db 0
   155                                  memory_z_set_4byte_addr$next:
   156 000000FE EB01                    jmp memory_z_set_4byte_val$next
   157 00000100 00                      memory_z_set_4byte_val: db 0
   158                                  memory_z_set_4byte_val$next:
   159 00000101 5D                      pop ebp
   160 00000102 58                      pop eax
   161 00000103 A3[00010000]            mov [memory_z_set_4byte_val], eax
   162 00000108 58                      pop eax
   163 00000109 A3[FD000000]            mov [memory_z_set_4byte_addr], eax
   164 0000010E 55                      push ebp
   165 0000010F A1[00010000]            mov eax, [memory_z_set_4byte_val]
   166 00000114 50                      push eax
   167 00000115 A1[FD000000]            mov eax, [memory_z_set_4byte_addr]
   168 0000011A 50                      push eax
   169 0000011B E8F1FEFFFF              call kernel_z_setMem_4byte
   170 00000120 C3                      ret
   171                                  memory_z_set_4byte$next:
   172 00000121 EB71                    jmp draw_z_pixel$next
   173                                  draw_z_pixel:
   174 00000123 EB01                    jmp draw_z_pixel_vramAddr$next
   175 00000125 00                      draw_z_pixel_vramAddr: db 0
   176                                  draw_z_pixel_vramAddr$next:
   177 00000126 EB01                    jmp draw_z_pixel_screenWidth$next
   178 00000128 00                      draw_z_pixel_screenWidth: db 0
   179                                  draw_z_pixel_screenWidth$next:
   180 00000129 EB01                    jmp draw_z_pixel_color$next
   181 0000012B 00                      draw_z_pixel_color: db 0
   182                                  draw_z_pixel_color$next:
   183 0000012C EB01                    jmp draw_z_pixel_y$next
   184 0000012E 00                      draw_z_pixel_y: db 0
   185                                  draw_z_pixel_y$next:
   186 0000012F EB01                    jmp draw_z_pixel_x$next
   187 00000131 00                      draw_z_pixel_x: db 0
   188                                  draw_z_pixel_x$next:
   189 00000132 5D                      pop ebp
   190 00000133 58                      pop eax
   191 00000134 A3[31010000]            mov [draw_z_pixel_x], eax
   192 00000139 58                      pop eax
   193 0000013A A3[2E010000]            mov [draw_z_pixel_y], eax
   194 0000013F 58                      pop eax
   195 00000140 A3[2B010000]            mov [draw_z_pixel_color], eax
   196 00000145 58                      pop eax
   197 00000146 A3[28010000]            mov [draw_z_pixel_screenWidth], eax
   198 0000014B 58                      pop eax
   199 0000014C A3[25010000]            mov [draw_z_pixel_vramAddr], eax
   200 00000151 55                      push ebp
   201 00000152 A1[31010000]            mov eax, [draw_z_pixel_x]
   202 00000157 50                      push eax
   203 00000158 A1[2E010000]            mov eax, [draw_z_pixel_y]
   204 0000015D 50                      push eax
   205 0000015E A1[28010000]            mov eax, [draw_z_pixel_screenWidth]
   206 00000163 50                      push eax
   207 00000164 58                      pop eax
   208 00000165 5B                      pop ebx
   209 00000166 F7E3                    mul ebx
   210 00000168 50                      push eax
   211 00000169 58                      pop eax
   212 0000016A 5B                      pop ebx
   213 0000016B 01D8                    add eax, ebx
   214 0000016D 50                      push eax
   215 0000016E A1[25010000]            mov eax, [draw_z_pixel_vramAddr]
   216 00000173 50                      push eax
   217 00000174 58                      pop eax
   218 00000175 5B                      pop ebx
   219 00000176 01D8                    add eax, ebx
   220 00000178 50                      push eax
   221 00000179 EB01                    jmp draw_z_pixel_addr$next
   222 0000017B 00                      draw_z_pixel_addr: db 0
   223                                  draw_z_pixel_addr$next:
   224 0000017C 58                      pop eax
   225 0000017D A3[7B010000]            mov [draw_z_pixel_addr], eax
   226 00000182 A1[2B010000]            mov eax, [draw_z_pixel_color]
   227 00000187 50                      push eax
   228 00000188 A1[7B010000]            mov eax, [draw_z_pixel_addr]
   229 0000018D 50                      push eax
   230 0000018E E818FFFFFF              call memory_z_set_1byte
   231 00000193 C3                      ret
   232                                  draw_z_pixel$next:
   233 00000194 EB29                    jmp test_z_draw$next
   234                                  test_z_draw:
   235 00000196 EB01                    jmp test_z_draw_addrVram$next
   236 00000198 00                      test_z_draw_addrVram: db 0
   237                                  test_z_draw_addrVram$next:
   238 00000199 5D                      pop ebp
   239 0000019A 58                      pop eax
   240 0000019B A3[98010000]            mov [test_z_draw_addrVram], eax
   241 000001A0 55                      push ebp
   242 000001A1 B80A000000              mov eax, 10
   243 000001A6 50                      push eax
   244 000001A7 B80A000000              mov eax, 10
   245 000001AC 50                      push eax
   246 000001AD B805000000              mov eax, 5
   247 000001B2 50                      push eax
   248 000001B3 A1[98010000]            mov eax, [test_z_draw_addrVram]
   249 000001B8 50                      push eax
   250 000001B9 E865FFFFFF              call draw_z_pixel
   251 000001BE C3                      ret
   252                                  test_z_draw$next:
