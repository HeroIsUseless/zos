# ZLANG
## 总体思路
1. 跟ZOS高度融合，以ZOS需求为准
2. 以汇编为基本原理，这样会更容易
3. 多吸取数学，语文的概念，如果有冲突，以汇编为准
4. 同一功能没有两种实现方式，所有人写的基本一样

解决内存泄露（内存安全）
解决线程安全
解决野指针
# 语法
## 基本语法
变量名支持下划线，为啥不支持呢？能支持就支持呗
按照回车分割语句，如果多条语句在一行，用逗号分割
如果需要多行，则需要在特定的地方断开才行
[不行，比较难做，只能分号了]
```
a<=1;
b<=a;
c<=3, d<=c;
```
## 注释
注释放到中括号里，可以放到代码的任何地方，中文的注释倾向于用中括号表示
```
[这是一条注释]
```
或者仅仅有一个左中括号也可以，但无法换行了
```
[这是一条行内注释
```
## 变量
变量有两种类型，Number和String，
在zlang中，Number和String保留字实际上也代表着0和""
字符串用双引号括起来，里面可以放入单引号''作为模版字符串的变量位置
```
a: 1
b: Number   [b的值为0]
c: "world"
d: String
e: "Hello 'c'" [e的值为"Hello world"]
```
变量必须先声明才能赋值
TODO: 学习rust，不可变，可变的后面加感叹号，提醒这是一个危险的变量
### 定义/复制与深/浅拷贝
a: A; [浅拷贝] 
a\init(4,6,8); [执行初始化函数]
a: A(1,2,3); [执行函数并赋予返回值]
函数内返回就是用 .<=1; 或者 func<=1; 也可以返回域，函数什么的
  这个会直接结束当前域的执行，因为主体已经变了，也不太对
## 语句
用分号/逗号结束，不用也可以，用于block最后一个，如果两个语句在一行，用逗号隔开也可以
## 操作符
### 声明运算符
声明运算符为冒号“:”，用来声明变量与函数，变量与函数必须先声明才能赋值或使用
```
a: 1 [变量a声明值为1且为整型]
c: 1, d: 3
b!: a [变量b声明为a的值和类型]
b! <= 3 [变量必须先声明才能赋值]
```
### 赋值运算符
<=或=>或<=>为仅仅赋值，不转换类型，如果类型不同会报错，通过增加赋值困难度，提醒开发者注意其危险性
赋值会引起变量变化，因此赋值是危险的
```
a! <= b [把b的值赋给a]
a => b! [把a的值赋给b]
a! <=> b! [a与b的值相互交换]
```
### 算数运算符
+
-
*
/
可以用<+=实现自加，没有规约冲突的，提供语法糖
<-= <*= </= <<=  <>=
a: 1
b: 2
b <+= a
此时b=3
<.= 代表用该函数透传出去？
\\ 右移动 // 左移 取自路径
### 逻辑运算符
<
>
\<
>/
=
# 是不等于
## 数列
数列用花括号表示（数学上的数列也是如此，并且并没有其他括号用了），
选择其中一个元素用\符号（思路来源于地址，但是容易与/混淆，这个是不好的一点），索引从1开始
```
arr: {1, 2, 3}
b: arr\1
```
## 函数
函数示例如下：
```
add(a, b):(a+b) [定义]
c <= add(1, 2) [使用]
```
不同于其他语言的return，这里是会一直向下执行的，理论上会将最后一句的执行结果作为输出返回
如果你想立即返回，请在语句后使用$(象形，取阻断之意)
add(a, b): (
  a <+= 1
  b <-= 1
  a+b$
  a-b
) [其中，函数从$位置便不再执行，将返回a+b]
## 条件语句
条件语句示例如下：
```
if(a>b, a, b)
if(a>b, (a), (b))            [那这个名字算什么？但名字是不行的，别说有if，还有大写类]
```
## 循环语句
循环语句示例如下：
```
while(a>b, a<=a-1)
```
## 包
包是计算机存储概念，一个包里面存储变量和其他包
类型体操的话，类型与值统一了
例如定义一个Pack
Pack: (
  a: 1,
  b: number,
  f(c:0, d:0): (c+d),
  [构造函数直接往下写]
  init(): ([malloc之类的，废弃])
);
你可以浅拷贝一个
pack1: Pack;
你可以深拷贝一个
pack2: Pack();
没有函数概念，只有带参变量
也没有变量概念，可以叫单元，分为变元，常元
自由变元，约束变元
你可以带括号，也可以不带括号，但是有参的一定要带括号，因为你要传参
只能返回自己了。。。
cls(a:0, b:0):(c:a+b, cls$) [这样感觉都有点辩证了，对，这样也是内存原理的]
```
d: cls(1,2)
```
类属性可以这样使用
```
cls(a:0, b:0):(
  c:0
  d: .\c
  e: .\a+.\b
  f: a+b
)
```

直观性，防呆性，简洁性，和谐性
反对 突兀性，例如js class 的constroctor以及大多数语言的super函数
Int<: func(x: Int): (

);
感觉还好，这个理论是上面语法推导出来的
如何表示赋值呢？
<= 理由是直观
如何表示定义呢？
: 理由是直观
<: 理由是和谐
可以确定的是，break和return能一统
Int|String<: add(p1: Int|String, p2: Int|String): (
  <.= p1 + p2
)

不同语句同行必须用;，不同行必须不能用;，折行用智能识别
a: (1)
那么a是什么？从数学上来讲，a是1，也就是说，会自动拆包
表达式也是包，执行到包这里就开始进入包执行了
那么函数怎么表示呢？
b: (1+1; 2+2; 3+3;) 此时b=3
add(): (1+1) 那么此时add就代表2，2()这样表示执行，无意义会报错
我为什么要小括号囊括一切呢？
小括号在表达式里会自动解包，在函数/类里代表这个变量
用大括号表示包呢
a: {1} 也会返回1.。。看来不行，还挺统一的
Stage0: <: 这个东西也是在表明你想要返回东西
if或者for好像是个any啊。。。它们是自动推断的
既然运行到包会自动运行并解包，那么怎么定义函数呢？。。。
反歧义性，你不能在变量就是执行，函数就不是执行了，歧义啊，最好都一样
一种模板的感觉，不执行，只赋值
<= 这个其实也是仿呆性，通过加大运动量来表示变量的危险性